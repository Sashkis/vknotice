function load(a){var b=$.Deferred();return chrome.storage.local.get(a,function(a){b.resolve(a)}),b.promise()}$.when($.getJSON("../lang/i18n.json"),load({showMessage:!1,audio:!0,lang:0,options:"friends,photos,videos,messages,groups,notifications",isLoadComment:0})).done(function(a,b){a=a[0],$("[loc]").text(function(c,d){return d&&a[d]&&a[d][b.lang]?a[d][b.lang]:void 0}),$.each(b.options.split(","),function(a,b){$("#"+b).prop("checked",!0)}),$("#comments").prop("checked",b.isLoadComment),$("#audio").prop("checked",b.audio),$("#showMessage").prop("checked",b.showMessage),$("#donate").html($("<form/>",{method:"POST","accept-charset":"utf-8",action:"https://www.liqpay.com/api/checkout",html:[$("<input/>",{type:"hidden",name:"data",value:"eyJ2ZXJzaW9uIjozLCJwdWJsaWNfa2V5IjoiaTU4NDM5MzEwOTQ4IiwiYW1vdW50IjoiMTAwIiwiY3VycmVuY3kiOiJSVUIiLCJkZXNjcmlwdGlvbiI6ItCd0LAg0YDQsNC30LLQuNGC0LjQtSDQmNC90YTQvtGA0LzQtdGA0LAiLCJ0eXBlIjoiZG9uYXRlIiwibGFuZ3VhZ2UiOiJydSIsInBheV93YXkiOiJjYXJkLGxpcXBheSxkZWxheWVkLGludm9pY2UscHJpdmF0MjQifQ=="}),$("<input/>",{type:"hidden",name:"signature",value:b.lang<3?"KqL70cSIpiTXOqJKFKKWJlkY3rc=":"R06+DNg9YGFDKzv7jkSRoQCL3B0="}),$("<input/>",{type:"image",name:"btn_text",src:"https://static.liqpay.com/buttons/d6"+(b.lang<3?"ru":"en")+".png"})]})),$(".panel").on("change","input",function(){var a="";$("input.main-opt:checked").each(function(b,c){a+=$(c).attr("id")+","}),chrome.storage.local.set({options:a,showMessage:$("#showMessage").prop("checked"),audio:$("#audio").prop("checked"),isLoadComment:$("#comments").prop("checked")?1:0})})});