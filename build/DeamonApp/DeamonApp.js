var DeamonApp;!function(t){var i=function(){function t(t,i){this.$vk=t,this.$timeout=i,this.isStarted=!1,this.interval=2e3,this.DoneCB=function(t){return!0},this.FailCB=function(t){return!1}}return t.prototype.setConfig=function(t){return this.method=t.method||this.method,this.params=t.params||this.params,this.interval=t.interval||this.interval,this.DoneCB=t.DoneCB||this.DoneCB,this.FailCB=t.FailCB||this.FailCB,this},t.prototype.start=function(){return this.isStarted=!0,this.sendRequest(),this},t.prototype.stop=function(){return this.isStarted=!1,this.$timeout.cancel(this.timeoutID),this},t.prototype.sendRequest=function(){var t=this;if(!this.isStarted)return this.stop();var i="function"==typeof this.method?this.method():this.method,e="function"==typeof this.params?this.params():this.params;return this.$vk.api(i,e).then(function(i){t.DoneCB(i)?t.restart():t.stop()},function(i){t.FailCB(i)?t.restart():t.stop()}),this},t.prototype.restart=function(){var t=this;return this.isStarted?(this.timeoutID=this.$timeout(function(){t.sendRequest()},this.interval,!1),this):this.stop()},t.$inject=["$vk","$timeout"],t}();t.DeamonService=i}(DeamonApp||(DeamonApp={}));var DeamonApp;!function(t){angular.module("DeamonApp",["VkApp"]).service("deamon",t.DeamonService)}(DeamonApp||(DeamonApp={}));