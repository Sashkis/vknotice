angular.module("SectionsApp",["VkApp","StorageApp"]).constant("SectionsNames",{Default:"Меню",NewMess:"Диалоги",NewFriends:"Заявки в друзья"}),angular.module("SectionsApp").controller("SectionsCtrl",["stack","storage","Analytics","SectionsNames",function(e,t,n,r){function c(e,c){angular.isDefined(c)&&c.preventDefault(),e!==i.currentSection?(i.stack.add(e),i.currentSection=e,n.trackPage("/"+i.currentSection,r[i.currentSection]||i.currentSection),t.set({currentSection:i.currentSection})):i.backSection(c)}function o(e){angular.isDefined(e)&&e.preventDefault(),i.stack["delete"](),i.currentSection=i.stack.get(),i.currentSection||(i.currentSection="Default"),n.trackPage("/"+i.currentSection,r[i.currentSection]||i.currentSection),t.set({currentSection:i.currentSection})}var i=this;i.stack=e,i.openSection=c,i.backSection=o,i.currentSection="Default",t.ready.then(function(e){e.currentSection&&c(e.currentSection)})}]),angular.module("SectionsApp").factory("stack",function(){var e=[];return{add:function(t){return e.push(t)},"delete":function(){return e.pop()},get:function(){return e[e.length-1]}}}),angular.module("SectionsApp").controller("SidebarCtrl",["storage",function(e){var t=this;e.ready.then(function(e){t.stg=e})}]),angular.module("SectionsApp").controller("FriendsCtrl",["storage",function(e){var t=this;e.ready.then(function(e){t.stg=e})}]).directive("friend",["storage",function(e){return{restrict:"E",replace:"true",templateUrl:"../SectionApp/sections/Default/friend.tpl",scope:{id:"="},link:function(t){t.user=e.getProfile(t.id)}}}]),angular.module("SectionsApp").controller("NewFriendsCtrl",["storage","$vk",function(e,t){var n=this;n.mark=function(e,n,r){e.preventDefault();var c=!1;switch(n){case"add":c="friends.add";break;case"ban":c="account.banUser";break;case"delete":c="friends.delete";break;case"deleteAll":c="friends.deleteAllRequests"}c&&t.auth().then(function(){t.api(c,{user_id:r,access_token:t.stg.access_token}).then(function(){})})},e.ready.then(function(e){n.stg=e})}]).directive("request",["storage",function(e){return{restrict:"E",replace:"true",templateUrl:"../SectionApp/sections/NewFriends/request.tpl",scope:!0,link:function(t,n,r){t.user=e.getProfile(r.userId)}}}]),angular.module("SectionsApp").controller("NewMessCtrl",["storage",function(e){var t=this;e.ready.then(function(e){t.stg=e})}]);