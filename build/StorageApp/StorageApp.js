var StorageApp;!function(t){!function(t){t[t.Never=0]="Never",t[t.SomeConditions=1]="SomeConditions",t[t.Always=2]="Always"}(t.OptionsStatus||(t.OptionsStatus={}));var s=(t.OptionsStatus,function(){function t(t,s,e){var o=this;this.$rootScope=s,this.stg={};var i=t.defer();this.ready=i.promise,chrome.storage.local.get(e,function(t){o.stg=angular.copy(t),s.$apply(),i.resolve(o.stg)})}return t.prototype.onChanged=function(t){var s=this;void 0===t&&(t=function(t,s){}),chrome.storage.onChanged.addListener(function(e){t(e,s.stg),s.$rootScope.$apply()})},t.prototype.set=function(t,s,e){void 0===s&&(s=!0),void 0===e&&(e=function(){}),angular.extend(this.stg,angular.copy(t)),s&&chrome.storage.local.set(t,e)},t.prototype.getProfileIndex=function(t){if(t&&this.stg&&this.stg.profiles)for(var s=0;s<this.stg.profiles.length;s++)if(this.stg.profiles[s].id===t)return s;return-1},t.prototype.getProfile=function(t){var s=this.getProfileIndex(t);return s>=0&&this.stg.profiles&&this.stg.profiles[s]?this.stg.profiles[s]:{}},t.prototype.setProfiles=function(t){var s=this;this.stg.profiles||this.initEmptyProfilesCash();var e=this.stg.profiles.length>0;return angular.isArray(t)?(t.map(function(t){if(t&&t.id){var o=e?s.getProfileIndex(t.id):-1;o>=0?s.stg.profiles[o]=t:s.stg.profiles.unshift(t)}}),this.set({profiles:this.stg.profiles}),this.stg.profiles):this.stg.profiles},t.prototype.clearProfiles=function(t){return t&&this.stg.profiles?(this.stg.profiles=this.stg.profiles.filter(function(t){return t&&t.id}),this.stg.profiles.length>t&&(this.stg.profiles=this.stg.profiles.slice(0,t)),this.stg.profiles):this.initEmptyProfilesCash()},t.prototype.initEmptyProfilesCash=function(){return this.set({profiles:[]}),[]},t.$inject=["$q","$rootScope","DefaultStorage"],t}());t.StorageService=s}(StorageApp||(StorageApp={}));var StorageApp;!function(t){angular.module("StorageApp",[]).constant("DefaultStorage",{access_token:"",user_id:0,options:{friends:!0,photos:!0,videos:!0,messages:!0,groups:!0,notifications:!0,comments:!0,audio:1},counter:{},currentSection:"",friends:[],newfriends:[],dialogs:[],groups:[],users:[],profiles:[],lang:0,notifyLast_viewed:Date.now()/1e3}).service("storage",t.StorageService)}(StorageApp||(StorageApp={}));